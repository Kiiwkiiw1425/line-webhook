// utils/matchCategory.js

function matchCategory(userText) {
  const text = userText.toLowerCase();

  const keywordMap = {
    'การใช้งานระบบทั่วไป': ['ระบบทั่วไป', 'ใช้งาน', 'เข้าใช้งาน', 'เข้าสู่ระบบ', 'ล็อกอิน', 'dpis6', 'การใช้งานระบบทั่วไป'],
    
    'ตั้งค่าระบบและนโยบาย': ['ตั้งค่า', 'นโยบาย', 'config', 'ระบบ', 'การตั้งค่า', 'นโยบายการใช้งาน', 'ตั้งค่าระบบและนโยบาย'],
    
    'ข้อมูลบุคลากร': ['บุคลากร', 'พนักงาน', 'เจ้าหน้าที่', 'เพิ่มข้อมูลบุคลากร', 'ข้อมูลส่วนตัว', 'ข้อมูลบุคลากร'],
    
    'สิทธิการใช้งาน': ['สิทธิ์', 'สิทธิการใช้งาน', 'ผู้ใช้', 'การเข้าถึง', 'จัดการสิทธิ์', 'user access', 'สิทธิการใช้งาน'],
    
    'การลา': ['ลา', 'ลางาน', 'ยื่นลา', 'คำขอลา', 'วันลา', 'ลาออนไลน์', 'ลาแอพ', 'การลา'],
    
    'โครงสร้าง/ตำแหน่ง': ['โครงสร้าง', 'ตำแหน่ง', 'โครงสร้างองค์กร', 'ปรับตำแหน่ง', 'template ตำแหน่ง', 'โครงสร้าง/ตำแหน่ง'],
    
    'บัญชีแนบท้าย/คำสั่ง': ['คำสั่ง', 'แนบท้าย', 'คำสั่งแต่งตั้ง', 'เลื่อนระดับ', 'มอบหมายงาน', 'บรรจุ', 'บัญชีแนบท้าย'],
    
    'รายงาน': ['รายงาน', 'แสดงรายงาน', 'สรุปผล', 'ข้อมูลสรุป', 'ออกรายงาน'],
    
    'การประเมินผล': ['ประเมิน', 'ประเมินผล', 'สมรรถนะ', 'การประเมินผล', 'รอบประเมิน'],
    
    'นำเข้า/ส่งออกข้อมูล': ['นำเข้า', 'ส่งออก', 'import', 'export', 'ข้อมูลนำเข้า', 'excel'],
    
    'บริหารวงเงิน': ['วงเงิน', 'บริหาร', 'งบประมาณ', 'วงเงินเจ้าหน้าที่', 'จัดสรรงบ'],
    
    'แอปพลิเคชัน': ['แอพ', 'แอป', 'โหลดแอพ', 'mobile', 'ios', 'android', 'ดาวน์โหลด', 'แอปพลิเคชัน'],

    'อื่นๆ': ['อื่นๆ', 'paint'],

    'ช่วยเหลือ': ['ช่วยเหลือ', 'faq', 'ติดต่อ', 'support', 'คำถามที่พบบ่อย', 'admin'],
    
    'การอัปเดตระบบ': ['อัปเดต', 'อัปเดตระบบ', 'อัปเดตประจำวัน', 'status', 'สถานะ dpis6']

  };

  for (const [category, keywords] of Object.entries(keywordMap)) {
    if (keywords.some(keyword => text.includes(keyword))) {
      return category;
    }
  }

  return null;
}

module.exports = matchCategory;
